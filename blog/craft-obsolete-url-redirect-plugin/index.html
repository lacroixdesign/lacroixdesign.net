<!DOCTYPE html> <html class=no-js lang=en-US> <head> <meta charset=utf-8> <meta http-equiv=Content-Type content="text/html; charset=UTF-8"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>A Craft Redirect Plugin for Obsolete URLs | LaCroix Design Co.</title> <meta name=description content="A plugin to automatically redirect to an entry’s new URL if its slug has been revised."> <link rel=canonical href="//www.lacroixdesign.net/blog/craft-obsolete-url-redirect-plugin/"> <meta property="fb:app_id" content=159291344098421> <meta property="og:title" content="A Craft Redirect Plugin for Obsolete URLs"> <meta property="og:type" content=article> <meta property="og:image" content="http://www.lacroixdesign.net/images/blog/craft-obsolete-url-redirect-plugin/craft-obsolete-url-redirect-plugin-e3b5afc3.jpg"> <meta property="og:url" content="http://www.lacroixdesign.net/blog/craft-obsolete-url-redirect-plugin/"> <meta property="og:description" content="A plugin to automatically redirect to an entry’s new URL if its slug has been revised."> <meta property="og:site_name" content="LaCroix Design Co."> <meta property="article:author" content="https://www.facebook.com/iamlacroix"> <meta name="twitter:card" content=summary_large_image> <meta name="twitter:site" content="@lacroixdesign"> <meta name="twitter:title" content="A Craft Redirect Plugin for Obsolete URLs"> <meta name="twitter:description" content="A plugin to automatically redirect to an entry’s new URL if its slug has been revised."> <meta name="twitter:creator" content="@iamlacroix"> <meta name="twitter:image:src" content="http://www.lacroixdesign.net/images/blog/craft-obsolete-url-redirect-plugin/craft-obsolete-url-redirect-plugin-e3b5afc3.jpg"> <link rel=author href="https://plus.google.com/111427230777224561636"></link> <meta name=viewport content="initial-scale=1.0, user-scalable=no, maximum-scale=1.0"> <meta name=apple-mobile-web-app-capable content=yes> <meta name=apple-mobile-web-app-status-bar-style content=black> <meta name=application-name content="&nbsp;"> <link rel=alternate type="application/atom+xml" title="LaCroix Design Co. Blog" href="/feed.xml"> <link rel=apple-touch-icon sizes=57x57 href="/apple-touch-icon-57x57.png"> <link rel=apple-touch-icon sizes=60x60 href="/apple-touch-icon-60x60.png"> <link rel=apple-touch-icon sizes=72x72 href="/apple-touch-icon-72x72.png"> <link rel=apple-touch-icon sizes=76x76 href="/apple-touch-icon-76x76.png"> <link rel=apple-touch-icon sizes=114x114 href="/apple-touch-icon-114x114.png"> <link rel=apple-touch-icon sizes=120x120 href="/apple-touch-icon-120x120.png"> <link rel=apple-touch-icon sizes=144x144 href="/apple-touch-icon-144x144.png"> <link rel=apple-touch-icon sizes=152x152 href="/apple-touch-icon-152x152.png"> <link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon-180x180.png"> <link rel=icon type="image/png" href="/favicon-32x32-40d8f0e3.png" sizes=32x32> <link rel=icon type="image/png" href="/favicon-194x194-eecd4dab.png" sizes=194x194> <link rel=icon type="image/png" href="/favicon-96x96-99840bf4.png" sizes=96x96> <link rel=icon type="image/png" href="/android-chrome-192x192-d9906239.png" sizes=192x192> <link rel=icon type="image/png" href="/favicon-16x16-08e5c2cc.png" sizes=16x16> <link rel=manifest href="/manifest.json"> <meta name=msapplication-TileColor content="#14191f"> <meta name=msapplication-TileImage content="/mstile-144x144-4b40a25f.png"> <meta name=theme-color content="#14191f"> <link href="//www.lacroixdesign.net/stylesheets/main-3fee6ca5.css" rel=stylesheet /> <link rel=stylesheet href="//cloud.typography.com/806434/723404/css/fonts.css"> <script src="//www.lacroixdesign.net/javascripts/modernizr-ce0c5a6f.js"></script> <script>
      !function(e,a,t,n,o,c,s){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=a.createElement(t),s=a.getElementsByTagName(t)[0],c.async=1,c.src=n,s.parentNode.insertBefore(c,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-11518275-1","auto"),ga("send","pageview",{page:location.pathname+location.search+location.hash});
    </script> <script>
      window.heap=window.heap||[],heap.load=function(t){window._heapid=t;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.heapanalytics.com/js/heap.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a);for(var n=function(t){return function(){heap.push([t].concat(Array.prototype.slice.call(arguments,0)))}},o=["identify","track"],c=0;c<o.length;c++)heap[o[c]]=n(o[c])},heap.load("864270473");
    </script> </head> <body> <div id=content> <header id=header class="s-header theme--light"> <div class=s-header__logo> <a href="/"> <img src="//www.lacroixdesign.net/images/logo-light-90515736.svg" onerror="this.src='http://www.lacroixdesign.net/images/logo-light-d90d9625.png'" alt="LaCroix Design Co." class=image-fullheight> </a> </div> <nav id=top-menu class=s-header-nav role=navigation> <ul> <li><a href="/case-studies">Work</a></li> <li><a href="/#services">Services</a></li> <li><a href="/#team">Team</a></li> <li><a href="/blog">Blog</a></li> </ul> </nav> </header> <a id=nav-toggle-btn href="#menu" data-toggle-nav> <span class="line line-1"></span> <span class="line line-2"></span> <span class="line line-3"></span> </a> <nav id=menu class=b-menu role=navigation> <ul class=b-menu-list> <li><a href="/#welcome">Home</a></li> <li><a href="/case-studies">Work</a></li> <li><a href="/#services">Services</a></li> <li><a href="/#team">Team</a></li> <li><a href="/blog">Blog</a></li> </ul> <ul class=b-menu-social> <li><a href="https://twitter.com/lacroixdesign" target=_blank><i data-icon=&#xe49d;></i></a></li> <li><a href="https://www.facebook.com/lacroixdesign" target=_blank><i data-icon=&#xe49a;></i></a></li> <li><a href="https://plus.google.com/113390683460121177144" target=_blank><i data-icon=&#xe493;></i></a></li> <li><a href="https://dribbble.com/lacroixdesign" target=_blank><i data-icon=&#xe4af;></i></a></li> <li><a href="https://github.com/lacroixdesign" target=_blank><i data-icon=&#xe4b8;></i></a></li> </ul> <div class=b-menu-email> <a href="mailto:hello@lacroixdesign.net">hello@lacroixdesign.net</a> </div> <div class=b-menu-phone> <a href="tel:+1%20312%20436%201532">+1 312 436 1532</a> </div> </nav> <div class=page-content id=page-content> <article class=s-post id=post--craft-obsolete-url-redirect-plugin> <div class=b-post-inline-header data-wow-duration="0.7s"> <img class=image-fullwidth src="//www.lacroixdesign.net/images/blog/craft-obsolete-url-redirect-plugin/craft-obsolete-url-redirect-plugin-e3b5afc3.jpg" alt="A Craft Redirect Plugin for Obsolete URLs"> </div> <div class="b-post-header "> <div class="l-constrained-large will-animate fadeIn" data-wow-duration="0.7s"> <h1>A Craft Redirect Plugin for Obsolete URLs</h1> <h2>A plugin to automatically redirect to an entry’s new URL if its slug has been revised.</h2> <time datetime="2015-03-11 08:00:00 -0500"> March 11, 2015 </time> <div class=author> <em>by</em> <strong><a href="/team/michael-lacroix/">Michael LaCroix</a></strong> </div> </div> </div> <div class=b-post-body> <div class=l-constrained-large> <div class="b-text will-animate fadeIn" data-wow-duration="0.7s" data-wow-delay="0.2s" data-wow-offset=50> <p>During a recent buildout of a <a target=_blank href="//buildwithcraft.com/">Craft</a> website, a client wanted the ability to automatically redirect to an entry’s new URL if (1) its slug has been revised and (2) a visitor landed on the old URL. For example, if an entry started with the URL:</p> <pre><code>http://example.com/first
</code></pre> <p>&hellip;but its slug was later changed to make it:</p> <pre><code>http://example.com/second
</code></pre> <p>&hellip;then visiting <code>/first</code> will redirect the user to <code>/second</code>. To do this, we developed a plugin which, on a request that is about to return a 404, will:</p> <ul> <li>Query for the most recent revision with the same path prefix and that now defunct slug.</li> <li>Fetch the current, live revision of that entry.</li> <li>Redirect (302) to that entry’s new URL.</li> </ul> <p>One thing to note is that the query is intentionally isolated to the same prefix. In the above example, it would not redirect to an entry in a section that has a different URL prefix, such as <code>/blog/</code>.</p> <h3>Installation</h3> <p>Download the plugin from <a target=_blank href="https://github.com/lacroixdesign/craft-obsolete-url-redirect">https://github.com/lacroixdesign/craft-obsolete-url-redirect</a>, unzip, then move the <code>obsoleteredirect</code> folder to your Craft plugins folder. Install it via the Craft Control Panel as you would for any plugin. Finally, add the following snippet to your 404 template file:</p> <pre><code class="language-twig">{% do craft.obsoleteRedirect.check() %}
</code></pre> <p>That&rsquo;s it!</p> <h3>Caveats</h3> <p>Obviously you will need either Craft Client or Pro, as the Personal edition does not have revision functionality. Additionally, this plugin does not track URL changes at a structural level; e.g. changing your blog section’s prefix from <code>/blog/</code> to <code>/news/</code>.</p> <p>It has not been tested on localized websites, so any testing and feedback in that realm would be greatly appreciated.</p> <h3>Open Source</h3> <p>The plugin is free and open source, and available on <a target=_blank href="https://github.com/lacroixdesign/craft-obsolete-url-redirect">GitHub</a>. Feel free to open issues, pull requests, or <a href="https://twitter.com/intent/tweet?text=@iamlacroix" target=_blank>send me a tweet</a> with any feedback or suggestions.</p> </div> <div class="b-simple-callout b-callout--comments"> <a class="btn small pill icon--left" target=_blank href="https://twitter.com/intent/tweet?text=%40iamlacroix%0A%0A&amp;url=http%3A%2F%2Flcrx.co%2F1AeiFro&amp;related=lacroixdesign,iamlacroix"> <i data-icon=&#xe49d;></i> Discuss on Twitter </a> <a class="btn small pill icon--left" target=_blank href="https://news.layervault.com/stories/45826-a-craft-redirect-plugin-for-obsolete-urls"> <i data-icon=&#xe600;></i> Discuss on Designer News </a> </div> <div class="b-author-meta will-animate fadeInUp" id=author> <div class=b-author-meta__avatar> <a href="/team/michael-lacroix/"> <img class="image-circle image-fullwidth pulse-grey-to-pink" src="//www.lacroixdesign.net/images/team/michael-lacroix-4e0cb6be.jpg" alt="Michael LaCroix, a Developer & Designer at LaCroix Design Co."> </a> </div> <h1><a href="/team/michael-lacroix/">Michael LaCroix</a></h1> <h2>Developer & Designer</h2> <ul class=social-icons-list> <li> <a href="https://twitter.com/iamlacroix" target=_blank> <i data-icon=&#xe49d;></i> </a> </li> <li> <a href="https://plus.google.com/111427230777224561636" target=_blank> <i data-icon=&#xe493;></i> </a> </li> <li> <a href="mailto:michael@lacroixdesign.net" target=_blank> <i data-icon=&#xe601;></i> </a> </li> <li> <a href="https://github.com/iamlacroix" target=_blank> <i data-icon=&#xe4b8;></i> </a> </li> <li> <a href="//stackoverflow.com/users/807346/michael-lacroix" target=_blank> <i data-icon=&#xe4d5;></i> </a> </li> </ul> </div> </div> </div> </article> <div class=s-post--cta> <div class=b-callout--cta-section> <h3>We are an innovative design and development team specializing in web and product experiences.</h3> <a href="/start" class="btn will-animate pulse"> Start a Project </a> </div> </div> <div class=s-posts-index data-current-post="/blog/craft-obsolete-url-redirect-plugin/" data-random-posts=3> </div> </div> <div id=subscribe class=s-footer-signup> <div class="s-footer-signup__inner will-animate fadeIn" data-wow-duration="0.7s" data-wow-delay="0.2s"> <h3><i data-icon=&#xe600;></i> Subscribe for Inside Access</h3> <p>Receive monthly briefings on what we have been researching, designing, building and thinking.</p> <form method=post target=_blank name=mc-embedded-subscribe-form action="//lacroixdesign.us2.list-manage.com/subscribe/post?u=cb74d792445887e99b0a36575&amp;id=9875eb3767"> <label for=mce-EMAIL class=visuallyhidden>Email Address</label> <input type=email name=EMAIL id=mce-EMAIL placeholder="you@example.com"><button type=submit>Join</button> </form> </div> </div> <footer id=footer class=s-footer> <ul class="social-icons-list s-footer__social"> <li><a href="https://twitter.com/lacroixdesign" target=_blank><i data-icon=&#xe49d;></i></a></li> <li><a href="https://www.facebook.com/lacroixdesign" target=_blank><i data-icon=&#xe49a;></i></a></li> <li><a href="https://plus.google.com/113390683460121177144" target=_blank><i data-icon=&#xe493;></i></a></li> <li><a href="https://dribbble.com/lacroixdesign" target=_blank><i data-icon=&#xe4af;></i></a></li> <li><a href="https://github.com/lacroixdesign" target=_blank><i data-icon=&#xe4b8;></i></a></li> </ul> <p class=s-footer__copyright> © 2015 LaCroix Design Co. </p> </footer> <nav id=supplementary-nav class=s-footer-nav> <ul> <li class=top-row><a href="/#welcome">Home</a></li> <li class=top-row><a href="/case-studies">Work</a></li> <li class=top-row><a href="/#services" data-close-menu>Services</a></li> <li><a href="/#team" data-close-menu>Team</a></li> <li><a href="/blog">Blog</a></li> <li><a href="#menu" data-toggle-nav>Contact</a></li> </ul> </nav> <div class=b-menu-body-overlay></div> </div> <script data-template-post type=text>
  {{#posts}}
    <article class="b-post-box image--bg-holder">

      <a href="{{path}}" class="image--bg-link theme--grow theme--fade">
        <div class="image--bg theme--dark"
              {{#thumbnail}}
                style="background-image: url('{{thumbnail}}')"
              {{/thumbnail}}></div>
      </a>

      <a class="b-post-box__meta b-post-preview fadeIn" href="{{path}}">
        <h1>{{title}}</h1>
        <time datetime="{{published}}">{{publishedHuman}}</time>
        {{#description}}
          <h2>{{description}}</h2>
        {{/description}}
      </a>

    </article>
  {{/posts}}
</script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="http://www.lacroixdesign.net/javascripts/vendor/jquery-1.11.2.min-6d2507ac.js"><\/script>');</script> <script src="//www.lacroixdesign.net/javascripts/main-09a585f5.js"></script> <script>
      var clicky_custom=clicky_custom||{};clicky_custom.title=document.title.replace(" | LaCroix Design Co.","");var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(100733305),function(){var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src="//static.getclicky.com/js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(c)}();
    </script> <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "http://www.lacroixdesign.net",
    "sameAs" : [ "https://www.facebook.com/lacroixdesign",
      "https://twitter.com/lacroixdesign",
      "https://www.linkedin.com/company/lacroix-design-company",
      "https://plus.google.com/113390683460121177144"],
    "logo": "http://media.lacroixdesign.net/lacroix-logo-dark.png",
    "contactPoint" : [
    { "@type" : "ContactPoint",
      "telephone" : "+1-312-436-1532",
      "contactType" : "customer service"
    } ]
  }
  </script> <script>
    window.twttr=function(t,e,r){var n,i,w=t.getElementsByTagName(e)[0];if(!t.getElementById(r))return i=t.createElement(e),i.id=r,i.src="https://platform.twitter.com/widgets.js",w.parentNode.insertBefore(i,w),window.twttr||(n={_e:[],ready:function(t){n._e.push(t)}})}(document,"script","twitter-wjs");
  </script> </body> </html>